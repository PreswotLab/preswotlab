{"version":3,"file":"DbConnectBySession.js","names":["DBConnectionBySession","sessionLoginInfo","dbHostIp","dbUser","dbName","dbPort","dbKind","sql","require","connect","conn","user","password","database","server","port","parseInt","pool","max","min","idleTimeoutMillis","options","encrypt","trustServerCertificate"],"sources":["../../src/dbs/DbConnectBySession.js"],"sourcesContent":["export class DBConnectionBySession\n{\n\t#host;\n\t#user;\n\t#name;\n\t#port;\n\t#kind;\n\t#password;\n\n\tconstructor(sessionLoginInfo)\n\t{\n\t\tthis.#host = sessionLoginInfo.dbHostIp;\n\t\tthis.#user = sessionLoginInfo.dbUser;\n\t\tthis.#name = sessionLoginInfo.dbName;\n\t\tthis.#port = sessionLoginInfo.dbPort;\n\t\tthis.#kind = sessionLoginInfo.dbKind;\n\t};\n\n\tasync connect()\n\t{\n\t\tconst sql = require('mssql');\n\t\ttry {\n\t\t\tconst conn = await sql.connect(this.#getConfig());\n\t\t\treturn (conn);\n\t\t} catch (e) {\n\t\t\tthrow(e);\n\t\t}\n\t};\n\n\t#getConfig() {\n\t\tif (this.#kind == 'MSSQL')\n\t\t\treturn (this.#getMssqlConfig());\n\t};\n\n\t#getMssqlConfig() {\n\treturn ({\n\t\tuser : this.#user,\n\t\tpassword : this.#password,\n\t\tdatabase : this.#name,\n\t\tserver : this.#host,\n\t\tport : parseInt(this.#port) || 1433,\n\t\tpool: {\n\t\tmax: 10,\n\t\tmin: 0,\n\t\tidleTimeoutMillis: 30000,\n\t\t},\n\t\toptions: {\n\t\tencrypt: true, \n\t\ttrustServerCertificate: true\n\t\t}\n\t});\n\t};\n};\n"],"mappings":";;;;;;;+CACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADaA,qBAAqB;EASjC,+BAAYC,gBAAgB,EAC5B;IAAA;IAAA;IAAA;IAAA;MAAA;MAAA;IAAA;IAAA;MAAA;MAAA;IAAA;IAAA;MAAA;MAAA;IAAA;IAAA;MAAA;MAAA;IAAA;IAAA;MAAA;MAAA;IAAA;IAAA;MAAA;MAAA;IAAA;IACC,0BAAI,SAASA,gBAAgB,CAACC,QAAQ;IACtC,0BAAI,SAASD,gBAAgB,CAACE,MAAM;IACpC,0BAAI,SAASF,gBAAgB,CAACG,MAAM;IACpC,0BAAI,SAASH,gBAAgB,CAACI,MAAM;IACpC,0BAAI,SAASJ,gBAAgB,CAACK,MAAM;EACrC;EAAC;IAAA;IAAA;MAAA,0EAED;QAAA;QAAA;UAAA;YAAA;cAAA;gBAEOC,GAAG,GAAGC,OAAO,CAAC,OAAO,CAAC;gBAAA;gBAAA;gBAAA,OAERD,GAAG,CAACE,OAAO,wBAAC,IAAI,gCAAJ,IAAI,EAAc;cAAA;gBAA3CC,IAAI;gBAAA,iCACFA,IAAI;cAAA;gBAAA;gBAAA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAIb;MAAA;QAAA;MAAA;MAAA;IAAA;EAAA;EAAA;AAAA;AAAA;AAAA,uBAEY;EACZ,IAAI,0BAAI,YAAU,OAAO,EACxB,8BAAQ,IAAI,0CAAJ,IAAI;AACd;AAAC,4BAEiB;EAClB,OAAQ;IACPC,IAAI,wBAAG,IAAI,QAAM;IACjBC,QAAQ,wBAAG,IAAI,YAAU;IACzBC,QAAQ,wBAAG,IAAI,QAAM;IACrBC,MAAM,wBAAG,IAAI,QAAM;IACnBC,IAAI,EAAGC,QAAQ,uBAAC,IAAI,SAAO,IAAI,IAAI;IACnCC,IAAI,EAAE;MACNC,GAAG,EAAE,EAAE;MACPC,GAAG,EAAE,CAAC;MACNC,iBAAiB,EAAE;IACnB,CAAC;IACDC,OAAO,EAAE;MACTC,OAAO,EAAE,IAAI;MACbC,sBAAsB,EAAE;IACxB;EACD,CAAC;AACD;AACA"}