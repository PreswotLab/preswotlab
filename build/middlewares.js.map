{"version":3,"file":"middlewares.js","names":["localMiddleware","req","res","next","locals","siteName","loggedIn","Boolean","session","loginInfo","checkLoginMiddleware","redirect","checkNotLoginMiddleware","csvUpload","multer","dest"],"sources":["../src/middlewares.js"],"sourcesContent":["import multer from \"multer\";\n\n//middleware를 거친 프로젝트 전체에서 사용가능한 변수만들기 \nexport const localMiddleware = (req, res, next) => {\n\t//login 상태정보를 프로젝트 로컬변수로 저장해 pug에서 사용\n\tres.locals.siteName = \"PRESWOT LAB\";\n\tres.locals.loggedIn = Boolean(req.session.loggedIn);\n\tres.locals.loginInfo = req.session.loginInfo;\n\tnext();\n}\n\nexport const checkLoginMiddleware = (req, res, next) => {\n\tif (req.session.loggedIn) //로그인 되어있나?\n\t\tnext();\n\telse //로그인 안되어있음\n\t\treturn res.redirect(\"/\");\n}\n\nexport const checkNotLoginMiddleware = (req, res, next) => {\n\tif (req.session.loggedIn)\n\t\treturn res.redirect(\"/\")\n\telse\n\t\tnext();\n}\n\nexport const csvUpload = multer({\n\tdest : \"./tmp/\"\n})\n"],"mappings":";;;;;;AAAA;AAA4B;AAE5B;AACO,IAAMA,eAAe,GAAG,SAAlBA,eAAe,CAAIC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAK;EAClD;EACAD,GAAG,CAACE,MAAM,CAACC,QAAQ,GAAG,aAAa;EACnCH,GAAG,CAACE,MAAM,CAACE,QAAQ,GAAGC,OAAO,CAACN,GAAG,CAACO,OAAO,CAACF,QAAQ,CAAC;EACnDJ,GAAG,CAACE,MAAM,CAACK,SAAS,GAAGR,GAAG,CAACO,OAAO,CAACC,SAAS;EAC5CN,IAAI,EAAE;AACP,CAAC;AAAA;AAEM,IAAMO,oBAAoB,GAAG,SAAvBA,oBAAoB,CAAIT,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAK;EACvD,IAAIF,GAAG,CAACO,OAAO,CAACF,QAAQ;IAAE;IACzBH,IAAI,EAAE,CAAC;IACH;IACJ,OAAOD,GAAG,CAACS,QAAQ,CAAC,GAAG,CAAC;AAC1B,CAAC;AAAA;AAEM,IAAMC,uBAAuB,GAAG,SAA1BA,uBAAuB,CAAIX,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAK;EAC1D,IAAIF,GAAG,CAACO,OAAO,CAACF,QAAQ,EACvB,OAAOJ,GAAG,CAACS,QAAQ,CAAC,GAAG,CAAC,MAExBR,IAAI,EAAE;AACR,CAAC;AAAA;AAEM,IAAMU,SAAS,GAAG,IAAAC,kBAAM,EAAC;EAC/BC,IAAI,EAAG;AACR,CAAC,CAAC;AAAA"}